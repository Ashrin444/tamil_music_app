{% extends "base.html" %}
{% block content %}

<link rel="stylesheet" href="/static/css/player.css">
<script src="/static/js/player.js" defer></script>
<script src="/static/js/playlist.js" defer></script>

{% for song in songs %}
<div class="player">
  <p>{{ song.title }}</p>

  <audio controls src="/static/songs/{{ song.filename }}"></audio>

  <div class="wave">
    {% for i in range(12) %}
      <div class="bar"></div>
    {% endfor %}
  </div>

  {% if playlists %}
  <form class="playlist-form" method="POST" action="/playlist/add">
    <input type="hidden" name="song_id" value="{{ song.id }}">
    <select name="playlist_id" required>
      {% for pl in playlists %}
        <option value="{{ pl.id }}">{{ pl.name }}</option>
      {% endfor %}
    </select>
    <button>Add to Playlist</button>
  </form>
  {% endif %}
</div>
{% endfor %}

<div class="card">
  <form method="POST" action="/playlist/create">
    <input name="name" placeholder="New playlist name" required>
    <button>Create Playlist</button>
  </form>
</div>

{% endblock %}
